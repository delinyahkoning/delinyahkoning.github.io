<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Delinyah Koning — Home</title>
<meta name="description" content="Portfolio — 3D, 2D, Design, Photos." />
<style>
  :root{--bg:#0a0b0f;--ink:#ffffff;--muted:#9aa0b3;--panel:#10121a;--accent:#9bd4ff;--radius:18px;--max:1200px}
  html{scroll-behavior:smooth}
  body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.6 Arial,Helvetica,sans-serif}
  .wrap{max-width:var(--max);margin:0 auto;padding:0 24px}
  header{position:sticky;top:0;z-index:50;background:rgba(7,8,12,.5);backdrop-filter:saturate(140%) blur(10px);border-bottom:1px solid rgba(255,255,255,.06)}
  .nav{display:flex;align-items:center;gap:16px;padding:14px 0}.brand{font-weight:700}.spacer{flex:1}
  .tabs{display:flex;gap:10px;flex-wrap:wrap}.tab{padding:8px 12px;border:1px solid rgba(255,255,255,.08);border-radius:999px;text-decoration:none;color:var(--ink)}
  .tab:hover{background:#131623}.tab.active{background:#131623;border-color:#4e6ca0;box-shadow:0 0 0 3px rgba(155,212,255,.25)}
  .hero{
    /* less vertical space above the text */
    min-height:46vh;
    display:grid;
    place-items:start;          /* align content to the top-left */
    background:
      radial-gradient(1200px 600px at 80% -10%,rgba(155,212,255,.05),transparent 60%),
      radial-gradient(900px 700px at -10% 20%,rgba(155,212,255,.04),transparent 50%),
      var(--bg);
    padding:20px 0 16px;        /* add small top padding, keep tighter bottom */
  }
  section{padding:60px 0}
  .panel{background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:24px}
  .grid{display:grid;gap:16px}.cards{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
  .card{border-radius:14px;background:#0d0f16;border:1px solid #232634;padding:14px}
  .thumb{aspect-ratio:16/9;background:#151826;border-radius:12px;margin-bottom:10px;display:grid;place-items:center;color:#9aa0b3;font-size:14px;letter-spacing:.3px}

  /* Left align hero content + subtitle under text at the same left start (x=40) */
  .hero-center{text-align:left}
  .hero-svg{display:block;width:min(92vw,1100px);height:auto}
  .hero-sub{color:var(--muted);max-width:760px;margin:12px 0 0 60px;text-align:left}

  /* Thumb media fill + hover grow */
  .thumb{ position:relative; overflow:hidden; cursor:pointer; transition:transform .25s ease, box-shadow .25s ease }
  .thumb img, .thumb video{ width:100%; height:100%; object-fit:cover; border-radius:12px; display:block }
  .thumb:hover{ transform:scale(1.03); box-shadow:0 10px 24px rgba(0,0,0,.35) }

  /* Fullscreen button overlay inside each thumb */
  .fs-btn{
    position:absolute; top:8px; right:8px; z-index:2;
    padding:6px 8px; font-size:14px; line-height:1; border-radius:8px;
    background:rgba(0,0,0,.45); color:#fff; border:1px solid rgba(255,255,255,.25);
    opacity:0; transition:opacity .2s ease; user-select:none;
  }
  .thumb:hover .fs-btn{ opacity:1 }

  /* Global exit fullscreen button (appears while in FS) */
  #fs-exit{
    position:fixed; top:16px; right:16px; z-index:99999;
    padding:10px 12px; border-radius:10px;
    background:rgba(0,0,0,.55); color:#fff; border:1px solid rgba(255,255,255,.25);
    font-size:14px; display:none; cursor:pointer;
  }
  body.fs-active #fs-exit{ display:block }

  /* Tighter spacing between lines in About */
  .panel .sub{ margin:6px 0; line-height:1.4 }

  /* Custom cursor — switched to semi-transparent white */
  .cursor{
    position:fixed;top:0;left:0;width:22px;height:22px;border-radius:50%;
    pointer-events:none;background:rgba(255,255,255,.15);
    border:1px solid rgba(255,255,255,.35);transform:translate(-50%,-50%);
    transition:width .15s,height .15s,background .2s;z-index:9999;
  }
</style>
</head>
<body>
<header>
  <div class="wrap nav">
    <div class="brand">something should be here</div><div class="spacer"></div>
    <nav class="tabs">
      <a class="tab active" href="/">Home</a>
      <a class="tab" href="/3d/">3D</a>
      <a class="tab" href="/2d/">2D</a>
      <a class="tab" href="/design/">Design</a>
      <a class="tab" href="/photos/">Photos</a>
    </nav>
  </div>
</header>

<section class="hero">
  <div class="wrap hero-center">
    <!-- Text inside SVG so we can apply paint-only displacement (no layout shift) -->
    <svg id="heroSVG" class="hero-svg" viewBox="0 0 1200 360" preserveAspectRatio="xMidYMid meet">
      <defs>
        <!-- Big filter region so nothing clips when displaced -->
        <filter id="liquify" x="-70%" y="-260%" width="240%" height="640%" filterUnits="objectBoundingBox">
          <!-- Normal map from offscreen canvas -->
          <feImage id="nm" x="0" y="0" width="1200" height="360" preserveAspectRatio="none" result="map"/>
          <feGaussianBlur in="map" stdDeviation="12" result="blur"/>

          <!-- Base displacement -->
          <feDisplacementMap id="dm" in="SourceGraphic" in2="blur" scale="68"
                             xChannelSelector="R" yChannelSelector="G" result="disp"/>

          <!-- ===== Prism mask: strength of displacement (|map - neutral|) ===== -->
          <feFlood flood-color="rgb(128,128,0)" result="neutral"/>
          <feBlend in="blur" in2="neutral" mode="difference" result="diff"/>          <!-- abs deviation -->
          <feColorMatrix in="diff" type="saturate" values="0" result="strengthLum"/>  <!-- luminance -->
          <feGaussianBlur in="strengthLum" stdDeviation="3" result="strength"/>       <!-- soften -->

          <!-- Isolate channels of displaced text, mask by strength, then offset -->
          <feColorMatrix in="disp" type="matrix" result="dispR"
            values="1 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 0"/>
          <feColorMatrix in="disp" type="matrix" result="dispG"
            values="0 0 0 0 0  0 1 0 0 0  0 0 0 0 0  0 0 0 1 0"/>
          <feColorMatrix in="disp" type="matrix" result="dispB"
            values="0 0 0 0 0  0 0 0 0 0  0 0 1 0 0  0 0 0 1 0"/>

          <feComposite in="dispR" in2="strength" operator="in" result="maskR"/>
          <feComposite in="dispG" in2="strength" operator="in" result="maskG"/>
          <feComposite in="dispB" in2="strength" operator="in" result="maskB"/>

          <!-- Offsets (animated in JS) -->
          <feOffset in="maskR" dx="0" dy="0" result="prismR" id="offR"/>
          <feOffset in="maskG" dx="0" dy="0" result="prismG" id="offG"/>
          <feOffset in="maskB" dx="0" dy="0" result="prismB" id="offB"/>

          <!-- Merge RGB fringes behind, white text on top -->
          <feMerge>
            <feMergeNode in="prismR"/>
            <feMergeNode in="prismG"/>
            <feMergeNode in="prismB"/>
            <feMergeNode in="disp"/> <!-- text stays on top -->
          </feMerge>
        </filter>
      </defs>

      <g filter="url(#liquify)">
        <text x="40" y="150" font-family="Arial, Helvetica, sans-serif" font-size="86" font-weight="700" fill="var(--ink)">this is</text>
        <text x="40" y="250" font-family="Arial, Helvetica, sans-serif" font-size="86" font-weight="700" fill="var(--ink)">a test</text>
      </g>
    </svg>

    <p class="hero-sub" style="margin-left:60px; margin-top:-10px; color:var(--ink);">
      Here I drop cool stuff to keep track of my own progress
    </p>
  </div>
</section>

<!-- Tighter top padding for the first content section after hero -->
<section style="padding-top:28px">
  <div class="wrap" style="display:grid;gap:20px;grid-template-columns:1.2fr .8fr">
    <div class="panel">
      <h2 style="margin-top:0">some of the cool stuff</h2>
      <div class="grid cards" style="margin-top:12px">

        <!-- 1) Space-themed Blender project (image) -->
        <article class="card">
          <div class="thumb" data-fullscreen>
            <button class="fs-btn" type="button" aria-label="Fullscreen">⤢</button>
            <img src="assets/greenplanet.png"
                 alt="Space-themed Blender render of a green planet"
                 loading="lazy">
          </div>
          <strong>Imaginary planet</strong>
          <div class="sub" style="font-size:13px">Procedurally made in Blender</div>
        </article>

        <!-- 2) Spider modeled from scratch (video) -->
        <article class="card">
          <div class="thumb" data-fullscreen>
            <button class="fs-btn" type="button" aria-label="Fullscreen">⤢</button>
            <video src="assets/spiderwaving.mp4"
                   autoplay muted loop playsinline></video>
          </div>
          <strong>Spider</strong>
          <div class="sub" style="font-size:13px">Procedurally made in Blender</div>
        </article>

        <!-- 3) Protein via Molecular Nodes (video) -->
        <article class="card">
          <div class="thumb" data-fullscreen>
            <button class="fs-btn" type="button" aria-label="Fullscreen">⤢</button>
            <video src="assets/md.mp4"
                   autoplay muted loop playsinline></video>
          </div>
          <strong>Protein Visualization</strong>
          <div class="sub" style="font-size:13px">MD trajectory in Blender</div>
        </article>

      </div>
    </div>
    <aside class="panel">
      <h2 style="margin-top:0">About</h2>
      <p class="sub">something should be here as well</p>
      <hr style="border-color:rgba(255,255,255,.08);border-style:solid;border-width:1px 0 0;margin:16px 0">
      <p><a class="tab" href="mailto:koningdelinyah@gmail.com">koningdelinyah@gmail.com</a></p>
      <p style="margin-top:10px">
        <a class="tab" href="assets/resume.pdf" target="_blank" style="display:inline-block">Resume (PDF)</a>
      </p>
    </aside>
  </div>
</section>

<footer>© <span id="y"></span> Delinyah Koning</footer>

<button id="fs-exit" type="button" aria-label="Exit fullscreen">Exit fullscreen (Esc)</button>
<div class="cursor"></div>

<script>
  // Year + your cursor
  document.getElementById('y').textContent = new Date().getFullYear();
  const cursor=document.querySelector(".cursor");
  document.addEventListener("mousemove",e=>{cursor.style.top=e.clientY+"px";cursor.style.left=e.clientX+"px";});
  document.querySelectorAll("a,button").forEach(el=>{
    el.addEventListener("mouseenter",()=>{
      cursor.style.width="36px";
      cursor.style.height="36px";
      // white-ish hover
      cursor.style.background="rgba(255,255,255,.25)";
    });
    el.addEventListener("mouseleave",()=>{
      cursor.style.width="22px";
      cursor.style.height="22px";
      // white-ish default
      cursor.style.background="rgba(255,255,255,.15)";
    });
  });

  // ================== Fullscreen controls for each thumb ==================
  (function(){
    const fsExitBtn = document.getElementById('fs-exit');

    function requestFS(el){
      const rfs = el.requestFullscreen || el.webkitRequestFullscreen || el.msRequestFullscreen || el.mozRequestFullScreen;
      if (rfs) rfs.call(el);
    }
    function exitFS(){
      const efs = document.exitFullscreen || document.webkitExitFullscreen || document.msExitFullscreen || document.mozCancelFullScreen;
      if (efs) efs.call(document);
    }
    function isFS(){
      return document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement || document.mozFullScreenElement;
    }

    // Enable click to fullscreen on each thumb, and button too
    document.querySelectorAll('.thumb[data-fullscreen]').forEach(thumb=>{
      const media = thumb.querySelector('video, img') || thumb;
      // Click anywhere on the thumb enters fullscreen
      thumb.addEventListener('click', (e)=>{
        // avoid double-trigger when clicking the button (it will also bubble)
        if (e.target.classList.contains('fs-btn')) return;
        requestFS(media);
      });
      // Click on overlay button enters fullscreen
      const btn = thumb.querySelector('.fs-btn');
      if (btn){
        btn.addEventListener('click', (e)=>{
          e.stopPropagation();
          requestFS(media);
        });
      }
      // Optional: double-click media for fullscreen
      media.addEventListener('dblclick', (e)=>{ e.stopPropagation(); requestFS(media); });
    });

    // Exit button
    fsExitBtn.addEventListener('click', exitFS);

    // Toggle UI state based on fullscreen changes
    ['fullscreenchange','webkitfullscreenchange','msfullscreenchange','mozfullscreenchange'].forEach(ev=>{
      document.addEventListener(ev, ()=>{
        if (isFS()){ document.body.classList.add('fs-active'); }
        else { document.body.classList.remove('fs-active'); }
      });
    });
  })();

  // ================== Liquify-like local warp (no alpha change) + PRISM (tuned) ==================
  (function(){
    const svg  = document.getElementById('heroSVG');
    const nmEl = document.getElementById('nm');
    const dm   = document.getElementById('dm');
    const offR = document.getElementById('offR');
    const offG = document.getElementById('offG');
    const offB = document.getElementById('offB');

    const vb   = svg.viewBox.baseVal; // 1200x360
    const c = document.createElement('canvas');
    const ctx = c.getContext('2d');
    c.width = vb.width; c.height = vb.height;

    const MAX_IMPRINTS = 75;
    const LIFE = 6500;
    const BASE = 125;
    const BASE_RADIUS = 100;
    const STRETCH = 2.5;
    const TWIRL = 1.25;
    const POWER = 1.20;

    const imprints = []; // {x,y,vx,vy,t}
    let last = {x: vb.width/2, y: vb.height/2};
    let vX = 0, vY = 0; // current mouse velocity (for prism direction)

    function toVB(e){
      const r = svg.getBoundingClientRect();
      return {
        x: (e.clientX - r.left) / r.width  * vb.width,
        y: (e.clientY - r.top)  / r.height * vb.height
      };
    }

    svg.addEventListener('mousemove', (e)=>{
      const p = toVB(e);
      vX = p.x - last.x; vY = p.y - last.y;
      last = p;

      imprints.unshift({x:p.x, y:p.y, vx:vX, vy:vY, t: performance.now()});
      if (imprints.length > MAX_IMPRINTS) imprints.pop();
    });

    svg.addEventListener('mouseleave', ()=>{ vX = vY = 0; });

    function clamp(v){ return Math.max(0, Math.min(255, v)); }
    function mix(a,b,t){ return a*(1-t)+b*t; }

    function drawNormalMap(){
      ctx.clearRect(0,0,c.width,c.height);
      ctx.fillStyle = 'rgb(128,128,0)'; ctx.fillRect(0,0,c.width,c.height);

      const now = performance.now();

      for (let i=imprints.length-1;i>=0;i--){
        const it = imprints[i];
        const age = now - it.t;
        if (age > LIFE){ imprints.splice(i,1); continue; }

        const t = age / LIFE;
        const ease = Math.pow(1 - t, 1.5); // slower fade near the end
        const grow = 1 + 0.9*t;

        const vlen = Math.hypot(it.vx, it.vy) || 1;
        const ux = it.vx / vlen, uy = it.vy / vlen;
        const disp = POWER * Math.min(1.2, vlen/14) * ease * 110;

        const cx = it.x, cy = it.y;
        const rx = BASE_RADIUS * STRETCH * grow;
        const ry = BASE_RADIUS * 0.85   * grow;

        ctx.save();
        ctx.translate(cx,cy);
        ctx.rotate(Math.atan2(uy,ux));
        ctx.scale(rx, ry);

        const pushX = BASE + (ux * disp * 0.6);
        const pushY = BASE + (uy * disp * 0.6);
        const spinX = BASE + ((-uy) * disp * TWIRL * 0.6);
        const spinY = BASE + (( ux) * disp * TWIRL * 0.6);

        const g = ctx.createRadialGradient(0,0,0, 0,0,1);
        g.addColorStop(0.00, `rgb(${clamp(pushX)},${clamp(pushY)},0)`);
        g.addColorStop(0.45, `rgb(${clamp(mix(pushX,spinX,0.5))},${clamp(mix(pushY,spinY,0.5))},0)`);
        g.addColorStop(0.85, `rgb(128,128,0)`);
        g.addColorStop(1.00, `rgb(128,128,0)`);

        ctx.fillStyle = g;
        ctx.beginPath(); ctx.arc(0,0,1,0,Math.PI*2); ctx.fill();
        ctx.restore();
      }

      nmEl.setAttribute('href', c.toDataURL('image/png'));
    }

    // ==== Animate + RGB prism offsets (with slower attack smoothing) ====
    let smoothAmt = 0;                    // smoothed prism strength
    let lastTime  = performance.now();
    let prevTarget = 0;

    // Tune: bigger ATTACK_MS = slower fade-in; RELEASE_MS = fade-out speed
    const ATTACK_MS  = 2000;
    const RELEASE_MS = 1000;

    function animate(){
      drawNormalMap();

      // Raw target strength driven by motion + trail activity
      const vMag   = Math.min(1, Math.hypot(vX, vY) / 24);
      const active = Math.min(1, imprints.length / MAX_IMPRINTS);
      const target = 5.0 * vMag * active; // base amount

      // Exponential smoothing toward target (slower attack, faster release)
      const now = performance.now();
      const dt  = now - lastTime;
      lastTime  = now;

      const rising = target > prevTarget;
      const tauMs  = rising ? ATTACK_MS : RELEASE_MS;
      const alpha  = 1 - Math.exp(-dt / Math.max(1, tauMs)); // 0..1

      smoothAmt += (target - smoothAmt) * alpha;
      prevTarget = target;

      const dirLen = Math.hypot(vX, vY) || 1;
      const dirX = vX / dirLen, dirY = vY / dirLen;

      // Apply smoothed strength to channel offsets
      const amt = smoothAmt;
      offR.setAttribute('dx', (-amt * 1.25 * dirX).toFixed(2));
      offR.setAttribute('dy', (-amt * 1.25 * dirY).toFixed(2));

      offG.setAttribute('dx', ( amt * 0.90 * dirX).toFixed(2));
      offG.setAttribute('dy', ( amt * 0.90 * dirY).toFixed(2));

      offB.setAttribute('dx', ( amt * 1.40 * (-dirY)).toFixed(2)); // 90° turn
      offB.setAttribute('dy', ( amt * 1.40 * ( dirX)).toFixed(2));

      requestAnimationFrame(animate);
    }
    animate();
  })();
</script>
</body>
</html>
